<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns="http://www.w3.org/1999/html">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Title</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
</head>
<div class="pb-4">
<div class="navbar bg-dark text-white">
  <tr th:text="${currentUser.email}"></tr>
  with roles:
  <tr th:text="${currentUser.roles}"></tr>
  <li class="nav-item nav justify-content-end">
  <a href="#" th:href="@{/logout}" class="text-muted">Logout</a>
    </li>
</div>
</div>
  <div class="container-fluid">
  <div class="row">
    <div class="col-md-2">
      <ul class="nav flex-column nav-pills">
        <li class="nav-item">
          <a class="nav-link active" href="#">Admin</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/user">User</a>
        </li>
      </ul>
    </div>
    <div class="col-md-10">
      <h3>
        Admin Panel
      </h3>
      <div class="bg-light">
        <ul class="nav nav-tabs" id="myTab" role="tablist">
          <li class="nav-item" role="presentation">
            <a class="nav-link active" id="table-tab" data-toggle="tab" href="#table" role="tab" aria-controls="table" aria-selected="true">Users table</a>
          </li>
          <li class="nav-item" role="presentation">
            <a class="nav-link" id="new-tab" data-toggle="tab" href="#new" role="tab" aria-controls="new" aria-selected="false">New user</a>
          </li>
        </ul>

        <!-- Tab panes -->
        <div class="tab-content">
          <div class="tab-pane active" id="table" role="tabpanel" aria-labelledby="table-tab">
            <h3>
              All users
            </h3>
            <table class="table table-striped" >
              <thead>
              <tr>
                <th>Id</th>
                <th>Name</th>
                <th>lastName</th>
                <th>Age</th>
                <th>email</th>
                <th>Role</th>
                <th>Edit</th>
                <th>Delete</th>
              </tr>
              </thead>
              <tr th:each="user: ${users}">
                <div class="modal fade" id="exampleModal" th:attr="id=*{user.id}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                  <div class="modal-dialog">
                    <form action="#" th:action="@{'/admin/edit/'+ ${user.id}}" th:object="${user}"
                          method="POST">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title" id="exampleModalLabel">Edit user</h5>
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                          </button>
                        </div>
                        <div class="modal-body">
                          <div class="container-fluid">
                            <div class="row">
                              <div class="col-md-12">
                                <div class="form-group">
                                  <label for="name">id</label>
                                  <input type="text" th:value="*{id}" id="id" name="id" class="form-control" readonly>
                                </div>
                                <div class="form-group">
                                  <label for="name">First name</label>
                                  <input type="text" th:value="*{name}" id="name" name="name" class="form-control">
                                </div>
                                <div class="form-group">
                                  <label for="LastName">Last name</label>
                                  <input type="text" th:value="*{lastname}" id="lastname" name="lastname" class="form-control">
                                </div>
                                <div class="form-group">
                                  <label for="Age">Age</label>
                                  <input type="number" th:value="*{age}" id="age" name="age" class="form-control">
                                </div>
                                <div class="form-group">
                                  <label for="email">
                                    Email address
                                  </label>
                                  <input type="email" th:value="*{email}" id="email" name="email" class="form-control">
                                </div>
                                <div class="form-group">
                                  <label for="password">
                                    Password
                                  </label>
                                  <input type="password" th:value="*{password}" id="password" name="password" class="form-control">
                                </div>
                                <div class="form-group">
                                  <label for="Role">Role</label>
                                  <select th:with="role = *{roles}" name="roles" multiple class="form-control" id="Role"  required="required">
                                    <option th:each="role : ${roles}"
                                            th:value="${role.id}"
                                            th:text="${role.name}"></option>
                                  </select>
                                </div>
                                <div class="modal-footer">
                                  <button type="submit" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                  <button type="submit" class="btn btn-primary">Edit</button>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>

                <td th:text="${user.id}">id</td>
                <td th:text="${user.name}">name</td>
                <td th:text="${user.lastname}">lastname</td>
                <td th:text="${user.age}">name</td>
                <td th:text="${user.email}">email</td>
                <td th:text="${user.roles}">role</td>

                <td><button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal"  th:attr="data-target='#' + *{user.id}">
                  Edit</button></td>
                  <td> <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#exampleModal1"  th:attr="data-target='#' + *{user.id} + 'deleteWindow'">
                    Delete</button></td>



                <div class="modal fade" id="exampleModal1" th:attr="id=*{user.id} + 'deleteWindow'" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                  <div class="modal-dialog">
                    <form action="#" th:action="@{'/admin/delete/'+ ${user.id}}" th:object="${user}"
                          method="POST">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title" id="exampleModalLabel1">Delete user</h5>
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                          </button>
                        </div>
                        <div class="modal-body">
                          <div class="container-fluid">
                            <div class="row">
                              <div class="col-md-12">
                                <div class="form-group">
                                  <label for="id2">id</label>
                                  <input type="text" th:value="*{id}" id="id2" name="id" class="form-control" readonly>
                                </div>
                                <div class="form-group">
                                  <label for="name2">First name</label>
                                  <input type="text" th:value="*{name}" id="name2" name="name" class="form-control" readonly>
                                </div>
                                <div class="form-group">
                                  <label for="LastName2">Last name</label>
                                  <input type="text" th:value="*{lastname}" id="lastname2" name="lastname" class="form-control" readonly>
                                </div>
                                <div class="form-group">
                                  <label for="Age2">Age</label>
                                  <input type="number" th:value="*{age}" id="age2" name="age" class="form-control"readonly>
                                </div>
                                <div class="form-group">
                                  <label for="email2">
                                    Email address
                                  </label>
                                  <input type="email" th:value="*{email}" id="email2" name="email" class="form-control"readonly>
                                </div>
                                <div class="form-group">
                                  <label for="password2">
                                    Password
                                  </label>
                                  <input type="password" th:value="*{password}" id="password2" name="password" class="form-control" readonly>
                                </div>
                                <div class="form-group">
                                  <label for="Role2">Role</label>
                                  <select th:with="role = *{roles}" name="roles" multiple class="form-control" id="Role2" readonly>
                                    <option th:each="role : ${roles}"
                                            th:value="${role.id}"
                                            th:text="${role.name}"></option>
                                  </select>
                                </div>
                                <div class="modal-footer">
                                  <button type="submit" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                  <button type="submit" class="btn btn-primary">Delete</button>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
              </tr>
            </table>
          </div>
          <div class="tab-pane" id="new" role="tabpanel" aria-labelledby="new-tab">
            <div class="container-fluid">
              <div class="row">
                <div class="col-md-12">
                  <form action="#" th:action="@{/admin/add}" th:object="${user}"
                        method="POST">
                  <div class="form-group">
                    <label for="name">id</label>
                    <input type="text" th:field="*{id}" id="id1" name="id" class="form-control" readonly>
                  </div>
                  <div class="form-group">
                    <label for="name">First name</label>
                    <input type="text" th:field="*{name}" id="name1" name="name" class="form-control">
                  </div>
                  <div class="form-group">
                    <label for="LastName">Last name</label>
                    <input type="text" th:field="*{lastname}" id="lastname1" name="lastname" class="form-control">
                  </div>
                  <div class="form-group">
                    <label for="Age">Age</label>
                    <input type="number" th:field="*{age}" id="age1" name="age" class="form-control">
                  </div>
                  <div class="form-group">
                    <label for="email">
                      Email address
                    </label>
                    <input type="email" th:field="*{email}" id="email1" name="email" class="form-control">
                  </div>
                  <div class="form-group">
                    <label for="password">
                      Password
                    </label>
                    <input type="password" th:field="*{password}" id="password1" name="password" class="form-control">
                  </div>
                  <div class="form-group">
                    <label for="Role3">Role</label>
                    <select th:with="role = *{roles}" name="roles" multiple class="form-control" id="Role3" required="required">
                      <option th:each="role : ${roles}"
                              th:value="${role.id}"
                              th:text="${role.name}"></option>
                    </select>
                  </div>
                  <button type="submit" class="btn btn-success">
                    Add new user
                  </button>
                </form>
              </div>
            </div>
          </div></div>
        </div>
        </div>
      </div>
    </div>
  </div>
</div>
</html>